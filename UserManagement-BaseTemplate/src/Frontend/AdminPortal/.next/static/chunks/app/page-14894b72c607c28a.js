(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2854:function(e,t,r){Promise.resolve().then(r.bind(r,5721))},5721:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return HomePage}});var n=r(7437),o=r(2265),s=r(4033),a=r(9514);function HomePage(){let e=(0,s.useRouter)(),t=(0,a.t)(),[r,u]=(0,o.useState)(!0),[i,c]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{c(!0)},[]),(0,o.useEffect)(()=>{i&&(t.loadUserFromStorage(),u(!1))},[i,t]),(0,o.useEffect)(()=>{r||(t.isAuthenticated&&t.user?e.replace("/dashboard"):e.replace("/login"))},[t.isAuthenticated,t.user,e,r]),(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}},2934:function(e,t,r){"use strict";r.d(t,{E:function(){return n}});let n=new class{getAuthToken(){return localStorage.getItem("authToken")}async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r="".concat(this.baseURL).concat(e),n={"Content-Type":"application/json"},o=this.getAuthToken();o&&(n.Authorization="Bearer ".concat(o));let s=await fetch(r,{...t,mode:"cors",credentials:"omit",headers:{...n,...t.headers}}),a=await s.json();if(!s.ok)throw Error(a.message||"API request failed");return a}catch(t){throw console.error("API Error for ".concat(e,":"),t),t}}async login(e){return this.makeRequest("/auth/login",{method:"POST",body:JSON.stringify(e)})}async logout(){return this.makeRequest("/auth/logout",{method:"POST"})}async refreshToken(){return this.makeRequest("/auth/refresh",{method:"POST"})}async getCurrentUser(){return this.makeRequest("/account/profile")}async updateProfile(e){let t={firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phone};return this.makeRequest("/account/profile",{method:"PUT",body:JSON.stringify(t)})}async changePassword(e){return this.makeRequest("/account/password",{method:"PUT",body:JSON.stringify(e)})}async getUserActivity(){return this.makeRequest("/users/me/activity")}async getAllUsers(e){let t=new URLSearchParams;return(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.pageSize)&&t.append("pageSize",e.pageSize.toString()),(null==e?void 0:e.role)&&t.append("role",e.role),(null==e?void 0:e.searchTerm)&&t.append("searchTerm",e.searchTerm),this.makeRequest("/users?".concat(t.toString()))}async getUserById(e){return this.makeRequest("/users/".concat(e))}async createUser(e){return this.makeRequest("/users",{method:"POST",body:JSON.stringify(e)})}async updateUser(e,t){return this.makeRequest("/users/".concat(e),{method:"PUT",body:JSON.stringify({id:e,...t})})}async deleteUser(e){return this.makeRequest("/users/".concat(e),{method:"DELETE"})}async assignRole(e,t){return this.makeRequest("/users/".concat(e,"/roles"),{method:"POST",body:JSON.stringify({userId:e,roleName:t})})}async removeRole(e,t){return this.makeRequest("/users/".concat(e,"/roles/").concat(t),{method:"DELETE"})}async getSystemStats(){return this.makeRequest("/system/stats")}constructor(e="http://localhost:5000/api"){this.baseURL=e}}},9514:function(e,t,r){"use strict";r.d(t,{t:function(){return l}});let createStoreImpl=e=>{let t;let r=new Set,setState=(e,n)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=n?n:"object"!=typeof o||null===o)?o:Object.assign({},t,o),r.forEach(r=>r(t,e))}},getState=()=>t,n={setState,getState,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},o=t=e(setState,getState,n);return n},createStore=e=>e?createStoreImpl(e):createStoreImpl;var n,o=r(2265),s=r(5401);let{useDebugValue:a}=o,{useSyncExternalStoreWithSelector:u}=s,i=!1,identity=e=>e,createImpl=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?createStore(e):e,useBoundStore=(e,r)=>(function(e,t=identity,r){r&&!i&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),i=!0);let n=u(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return a(n),n})(t,e,r);return Object.assign(useBoundStore,t),useBoundStore};var c=r(2934);let l=(n=(e,t)=>({user:null,token:null,isAuthenticated:!1,setUser:t=>e({user:t,isAuthenticated:!0}),loadUserFromStorage:()=>{setTimeout(()=>{try{let t=localStorage.getItem("authToken"),r=localStorage.getItem("user");if(t&&r)try{let n=JSON.parse(r);e({user:n,token:t,isAuthenticated:!0})}catch(e){localStorage.removeItem("authToken"),localStorage.removeItem("user")}}catch(e){console.error("Error in loadUserFromStorage:",e)}},0)},login:async t=>{try{let n=await c.E.login(t);if(n.success){var r;let{user:t,accessToken:o}=n,s={...t,role:(null===(r=t.roles)||void 0===r?void 0:r[0])||"Member"};localStorage.setItem("authToken",o),localStorage.setItem("user",JSON.stringify(s)),e({user:s,token:o,isAuthenticated:!0})}else throw Error(n.message||"Login failed")}catch(e){throw console.error("Login error:",e),e}},logout:async()=>{try{await c.E.logout()}catch(e){}localStorage.removeItem("authToken"),localStorage.removeItem("user"),e({user:null,token:null,isAuthenticated:!1})}}))?createImpl(n):createImpl},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2265),o=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var n,i={},c=null,l=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,n)&&!u.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:o,type:e,key:c,ref:l,props:i,_owner:a.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(94)},9808:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2265),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useState,a=n.useEffect,u=n.useLayoutEffect,i=n.useDebugValue;function checkIfSnapshotChanged(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!o(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=s({inst:{value:r,getSnapshot:t}}),o=n[0].inst,c=n[1];return u(function(){o.value=r,o.getSnapshot=t,checkIfSnapshotChanged(o)&&c({inst:o})},[e,r,t]),a(function(){return checkIfSnapshotChanged(o)&&c({inst:o}),e(function(){checkIfSnapshotChanged(o)&&c({inst:o})})},[e]),i(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},3176:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2265),o=r(6272),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=o.useSyncExternalStore,u=n.useRef,i=n.useEffect,c=n.useMemo,l=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var d=u(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var h=a(e,(d=c(function(){function memoizedSelector(t){if(!u){if(u=!0,e=t,t=n(t),void 0!==o&&f.hasValue){var r=f.value;if(o(r,t))return a=r}return a=t}if(r=a,s(e,t))return r;var i=n(t);return void 0!==o&&o(r,i)?(e=t,r):(e=t,a=i)}var e,a,u=!1,i=void 0===r?null:r;return[function(){return memoizedSelector(t())},null===i?void 0:function(){return memoizedSelector(i())}]},[t,r,n,o]))[0],d[1]);return i(function(){f.hasValue=!0,f.value=h},[h]),l(h),h}},6272:function(e,t,r){"use strict";e.exports=r(9808)},5401:function(e,t,r){"use strict";e.exports=r(3176)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=2854)}),_N_E=e.O()}]);