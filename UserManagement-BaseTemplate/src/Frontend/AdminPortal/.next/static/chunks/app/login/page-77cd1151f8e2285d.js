(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9329:function(e,t,r){Promise.resolve().then(r.bind(r,7355))},7355:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return LoginPage}});var n=r(7437),s=r(2265),o=r(4033),a=r(9514);function LoginPage(){let e=(0,o.useRouter)(),t=(0,a.t)(e=>e.login),[r,i]=(0,s.useState)({email:"",password:""}),[u,c]=(0,s.useState)(""),[l,d]=(0,s.useState)(!1),handleSubmit=async n=>{n.preventDefault(),d(!0),c("");try{await t(r),e.push("/dashboard")}catch(e){console.error("Login error:",e),c(e instanceof Error?e.message:"Invalid email or password")}finally{d(!1)}},handleChange=e=>{let{name:t,value:r}=e.target;i(e=>({...e,[t]:r}))};return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,n.jsx)("div",{children:(0,n.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to Admin Portal"})}),(0,n.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:handleSubmit,children:[(0,n.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,n.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:r.email,onChange:handleChange})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,n.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:r.password,onChange:handleChange})]})]}),u&&(0,n.jsx)("div",{className:"text-red-500 text-sm text-center",children:u}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:l?"Signing in...":"Sign in"})})]})]})})}},2934:function(e,t,r){"use strict";r.d(t,{E:function(){return n}});let n=new class{getAuthToken(){return localStorage.getItem("authToken")}async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r="".concat(this.baseURL).concat(e),n={"Content-Type":"application/json"},s=this.getAuthToken();s&&(n.Authorization="Bearer ".concat(s));let o=await fetch(r,{...t,mode:"cors",credentials:"omit",headers:{...n,...t.headers}}),a=await o.json();if(!o.ok)throw Error(a.message||"API request failed");return a}catch(t){throw console.error("API Error for ".concat(e,":"),t),t}}async login(e){return this.makeRequest("/auth/login",{method:"POST",body:JSON.stringify(e)})}async logout(){return this.makeRequest("/auth/logout",{method:"POST"})}async refreshToken(){return this.makeRequest("/auth/refresh",{method:"POST"})}async getCurrentUser(){return this.makeRequest("/account/profile")}async updateProfile(e){let t={firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phone};return this.makeRequest("/account/profile",{method:"PUT",body:JSON.stringify(t)})}async changePassword(e){return this.makeRequest("/account/password",{method:"PUT",body:JSON.stringify(e)})}async getUserActivity(){return this.makeRequest("/users/me/activity")}async getAllUsers(e){let t=new URLSearchParams;return(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.pageSize)&&t.append("pageSize",e.pageSize.toString()),(null==e?void 0:e.role)&&t.append("role",e.role),(null==e?void 0:e.searchTerm)&&t.append("searchTerm",e.searchTerm),this.makeRequest("/users?".concat(t.toString()))}async getUserById(e){return this.makeRequest("/users/".concat(e))}async createUser(e){return this.makeRequest("/users",{method:"POST",body:JSON.stringify(e)})}async updateUser(e,t){return this.makeRequest("/users/".concat(e),{method:"PUT",body:JSON.stringify({id:e,...t})})}async deleteUser(e){return this.makeRequest("/users/".concat(e),{method:"DELETE"})}async assignRole(e,t){return this.makeRequest("/users/".concat(e,"/roles"),{method:"POST",body:JSON.stringify({userId:e,roleName:t})})}async removeRole(e,t){return this.makeRequest("/users/".concat(e,"/roles/").concat(t),{method:"DELETE"})}async getSystemStats(){return this.makeRequest("/system/stats")}constructor(e="http://localhost:5000/api"){this.baseURL=e}}},9514:function(e,t,r){"use strict";r.d(t,{t:function(){return l}});let createStoreImpl=e=>{let t;let r=new Set,setState=(e,n)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},getState=()=>t,n={setState,getState,getInitialState:()=>s,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},s=t=e(setState,getState,n);return n},createStore=e=>e?createStoreImpl(e):createStoreImpl;var n,s=r(2265),o=r(5401);let{useDebugValue:a}=s,{useSyncExternalStoreWithSelector:i}=o,u=!1,identity=e=>e,createImpl=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?createStore(e):e,useBoundStore=(e,r)=>(function(e,t=identity,r){r&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);let n=i(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return a(n),n})(t,e,r);return Object.assign(useBoundStore,t),useBoundStore};var c=r(2934);let l=(n=(e,t)=>({user:null,token:null,isAuthenticated:!1,setUser:t=>e({user:t,isAuthenticated:!0}),loadUserFromStorage:()=>{setTimeout(()=>{try{let t=localStorage.getItem("authToken"),r=localStorage.getItem("user");if(t&&r)try{let n=JSON.parse(r);e({user:n,token:t,isAuthenticated:!0})}catch(e){localStorage.removeItem("authToken"),localStorage.removeItem("user")}}catch(e){console.error("Error in loadUserFromStorage:",e)}},0)},login:async t=>{try{let n=await c.E.login(t);if(n.success){var r;let{user:t,accessToken:s}=n,o={...t,role:(null===(r=t.roles)||void 0===r?void 0:r[0])||"Member"};localStorage.setItem("authToken",s),localStorage.setItem("user",JSON.stringify(o)),e({user:o,token:s,isAuthenticated:!0})}else throw Error(n.message||"Login failed")}catch(e){throw console.error("Login error:",e),e}},logout:async()=>{try{await c.E.logout()}catch(e){}localStorage.removeItem("authToken"),localStorage.removeItem("user"),e({user:null,token:null,isAuthenticated:!1})}}))?createImpl(n):createImpl},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2265),s=Symbol.for("react.element"),o=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var n,u={},c=null,l=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,n)&&!i.hasOwnProperty(n)&&(u[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===u[n]&&(u[n]=t[n]);return{$$typeof:s,type:e,key:c,ref:l,props:u,_owner:a.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(94)},9808:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2265),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,a=n.useEffect,i=n.useLayoutEffect,u=n.useDebugValue;function checkIfSnapshotChanged(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),s=n[0].inst,c=n[1];return i(function(){s.value=r,s.getSnapshot=t,checkIfSnapshotChanged(s)&&c({inst:s})},[e,r,t]),a(function(){return checkIfSnapshotChanged(s)&&c({inst:s}),e(function(){checkIfSnapshotChanged(s)&&c({inst:s})})},[e]),u(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},3176:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2265),s=r(6272),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=s.useSyncExternalStore,i=n.useRef,u=n.useEffect,c=n.useMemo,l=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var d=i(null);if(null===d.current){var m={hasValue:!1,value:null};d.current=m}else m=d.current;var h=a(e,(d=c(function(){function memoizedSelector(t){if(!i){if(i=!0,e=t,t=n(t),void 0!==s&&m.hasValue){var r=m.value;if(s(r,t))return a=r}return a=t}if(r=a,o(e,t))return r;var u=n(t);return void 0!==s&&s(r,u)?(e=t,r):(e=t,a=u)}var e,a,i=!1,u=void 0===r?null:r;return[function(){return memoizedSelector(t())},null===u?void 0:function(){return memoizedSelector(u())}]},[t,r,n,s]))[0],d[1]);return u(function(){m.hasValue=!0,m.value=h},[h]),l(h),h}},6272:function(e,t,r){"use strict";e.exports=r(9808)},5401:function(e,t,r){"use strict";e.exports=r(3176)}},function(e){e.O(0,[971,472,744],function(){return e(e.s=9329)}),_N_E=e.O()}]);